(window["webpackJsonpreact-hotel-reservation"]=window["webpackJsonpreact-hotel-reservation"]||[]).push([[0],{24:function(e,t,a){e.exports=a.p+"static/media/person.21ec2ace.svg"},25:function(e,t,a){e.exports=a.p+"static/media/bedroom.db939d70.svg"},26:function(e,t,a){e.exports=a.p+"static/media/room_service.602bb3ab.svg"},27:function(e,t,a){e.exports=a.p+"static/media/map.fa3bd6d6.svg"},28:function(e,t,a){e.exports=a.p+"static/media/new.7a95ab0f.svg"},37:function(e,t,a){},48:function(e,t,a){e.exports=a(65)},53:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),s=a(44),i=a.n(s),r=(a(53),a(15)),o=a(16),c=a(8),m=a(9),h=a(11),u=a(10),d=a(12),E=a(70),D=a(71),v=a(72),y=a(66),g=a(67),p=a(68),f=a(69),R=(a(37),a(24)),k=a.n(R),N=a(25),b=a.n(N),S=a(26),x=a.n(S),O=a(27),C=a.n(O),j=a(28),w=a.n(j),V=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"header"},n.a.createElement(y.a,null,n.a.createElement(g.a,null,n.a.createElement(p.a,null,n.a.createElement(f.a,{href:"#"},n.a.createElement("img",{src:k.a,alt:"about"}),"\u95dc\u65bc\u6211\u5011")),n.a.createElement(p.a,null,n.a.createElement(f.a,{href:"#"},n.a.createElement("img",{src:b.a,alt:"room_introduction"}),"\u5ba2\u623f\u4ecb\u7d39")),n.a.createElement(p.a,null,n.a.createElement(f.a,{href:"#"},n.a.createElement("img",{src:x.a,alt:"room_service"}),"\u4f4f\u5bbf\u670d\u52d9")),n.a.createElement(p.a,null,n.a.createElement(f.a,{href:"#"},n.a.createElement("img",{src:C.a,alt:"traffic"}),"\u4ea4\u901a\u6307\u5f15")),n.a.createElement(p.a,null,n.a.createElement(f.a,{href:"#"},n.a.createElement("img",{src:w.a,alt:"news"}),"\u6700\u65b0\u6d88\u606f")))))}}]),t}(l.Component),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){fetch("https://challenge.thef2e.com/api/thef2e2019/stage6/rooms",{headers:new Headers({Accept:"application/json",Authorization:"Bearer i2A9LrARnW0vSgOGpO9E3X7kDM1tZDQwRLDK1qOlXxXtzVKG6ByZN2JXLxqC"})}).then(function(e){e.json().then(function(e){a.setState({hotelRoomData:e.items})})})},a.state={hotelRoomData:null},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e="";return this.state.hotelRoomData&&this.state.hotelRoomData.length>0&&(e=this.state.hotelRoomData.map(function(e,t){return n.a.createElement(E.a,{xs:"4",key:t},n.a.createElement(r.b,{to:"/innerPage/".concat(e.id)},n.a.createElement("div",{className:"roomsCover"},n.a.createElement("h4",null,e.name),n.a.createElement("p",null,"$",e.normalDayPrice," ~ $",e.holidayPrice),n.a.createElement("span",null,"more \u2192")),n.a.createElement("img",{key:t,src:e.imageUrl,alt:"Card cap"})))})),n.a.createElement("div",{className:"home"},n.a.createElement("div",{className:"topArea"},n.a.createElement(V,null),n.a.createElement("div",{className:"content"},n.a.createElement(D.a,{fluid:!0},n.a.createElement(v.a,null,n.a.createElement(E.a,{xs:"8"},n.a.createElement("div",{className:"logoImage"}),n.a.createElement(v.a,{className:"roomsTitle"},n.a.createElement("div",null,"\u5ba2\u623f\u4ecb\u7d39")),n.a.createElement(v.a,{className:"rooms"},e||"")),n.a.createElement(E.a,{xs:"4"}))))))}}]),t}(l.Component),T=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"footer"},n.a.createElement(D.a,{fluid:!0},n.a.createElement(v.a,null,n.a.createElement(E.a,{xs:"6"},n.a.createElement(v.a,null,n.a.createElement(E.a,{xs:"2"}),n.a.createElement(E.a,{xs:"5"},n.a.createElement(v.a,null,"Tel: 071234567"),n.a.createElement(v.a,null,"Fax: 071234567")),n.a.createElement(E.a,{xs:"5"},n.a.createElement(v.a,null,"Email: lucky@gamil.com"),n.a.createElement(v.a,null,"Add: \u53f0\u4e2d\u5e02\u897f\u5c6f\u5340")))),n.a.createElement(E.a,{xs:"6"},n.a.createElement(v.a,{className:"langRow"},n.a.createElement(E.a,null,"\u7e41\u9ad4\u4e2d\u6587"),n.a.createElement(E.a,null,"\u7b80\u4f53\u4e2d\u6587"),n.a.createElement(E.a,null,"\u65e5\u672c\u8a9e"),n.a.createElement(E.a,null,"English"),n.a.createElement(E.a,null,"\ud55c\uad6d\uc5b4"))))))}}]),t}(l.Component),A=a(6),I=a(33),L=a.n(I),B=a(73),F=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"header"},n.a.createElement(y.a,null,n.a.createElement(r.b,{to:"/"},n.a.createElement(B.a,null,n.a.createElement("div",{className:"logoImage"}))),n.a.createElement(g.a,null,n.a.createElement(p.a,null,n.a.createElement(f.a,{href:"#"},n.a.createElement("img",{src:k.a,alt:"about"}),"\u95dc\u65bc\u6211\u5011")),n.a.createElement(p.a,null,n.a.createElement(f.a,{href:"#"},n.a.createElement("img",{src:b.a,alt:"room_introduction"}),"\u5ba2\u623f\u4ecb\u7d39")),n.a.createElement(p.a,null,n.a.createElement(f.a,{href:"#"},n.a.createElement("img",{src:x.a,alt:"room_service"}),"\u4f4f\u5bbf\u670d\u52d9")),n.a.createElement(p.a,null,n.a.createElement(f.a,{href:"#"},n.a.createElement("img",{src:C.a,alt:"traffic"}),"\u4ea4\u901a\u6307\u5f15")),n.a.createElement(p.a,null,n.a.createElement(f.a,{href:"#"},n.a.createElement("img",{src:w.a,alt:"news"}),"\u6700\u65b0\u6d88\u606f")))))}}]),t}(l.Component),M=(a(43),a(74)),G=a(75),X=a(76),_=a(77),$=a(78),z=a(79),W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=a.props.match;fetch("https://challenge.thef2e.com/api/thef2e2019/stage6/room/".concat(e.params.id),{headers:new Headers({Accept:"application/json",Authorization:"Bearer i2A9LrARnW0vSgOGpO9E3X7kDM1tZDQwRLDK1qOlXxXtzVKG6ByZN2JXLxqC"})}).then(function(e){e.json().then(function(e){a.setState({hotelBookingData:e.booking,hotelRoomData:e.room[0],checkInEarly:e.room[0].checkInAndOut.checkInEarly.split(":")[0],checkInLate:e.room[0].checkInAndOut.checkInLate.split(":")[0],checkOut:e.room[0].checkInAndOut.checkOut.split(":")[0]})})})},a.handleStartDayClick=a.handleStartDayClick.bind(Object(A.a)(a)),a.handleEndDayClick=a.handleEndDayClick.bind(Object(A.a)(a)),a.computedPricePerRoom=a.computedPricePerRoom.bind(Object(A.a)(a)),a.selectRoomNum=a.selectRoomNum.bind(Object(A.a)(a)),a.selectAdult=a.selectAdult.bind(Object(A.a)(a)),a.selectChild=a.selectChild.bind(Object(A.a)(a)),a.state={selectedStartDay:null,selectedEndDay:null,checkInEarly:null,checkInLate:null,checkOut:null,holiday:null,normalDay:null,roomNum:0,adultNum:0,childNum:0},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"handleStartDayClick",value:function(e,t){var a=t.selected;this.setState({selectedStartDay:a?void 0:e,endDayFirstDate:a?void 0:e.getTime()+864e5}),this.state.selectedEndDay&&(this.state.selectedEndDay.getTime()<=e.getTime()+864e5?(this.setState({selectedEndDay:void 0}),this.computedPricePerRoom(e.getDay(),e.getTime(),void 0,void 0)):this.computedPricePerRoom(e.getDay(),e.getTime(),this.state.selectedEndDay.getDay(),this.state.selectedEndDay.getTime()))}},{key:"handleEndDayClick",value:function(e,t){var a=t.selected;this.state.selectedStartDay?(this.setState({selectedEndDay:a?void 0:e}),this.computedPricePerRoom(this.state.selectedStartDay.getDay(),this.state.selectedStartDay.getTime(),e.getDay(),e.getTime())):alert("\u8acb\u5148\u9078\u64c7\u5165\u4f4f\u65e5\u671f")}},{key:"computedPricePerRoom",value:function(e,t,a,l){var n=(l-t)/864e5;if(l){var s=parseInt(n/7),i=n-7*s;0===i?this.setState({holiday:3*s,normalDay:4*s}):5===e?i<=3?this.setState({holiday:3*s+i,normalDay:n-(3*s+i)}):this.setState({holiday:3*s+7-e+1,normalDay:n-(3*s+7-e+1)}):6===e?i<=2?this.setState({holiday:3*s+i,normalDay:n-(3*s+i)}):this.setState({holiday:3*s+2,normalDay:n-(3*s+2)}):0===e?i<=5?this.setState({holiday:3*s+1,normalDay:n-(3*s+1)}):this.setState({holiday:3*s+2,normalDay:n-(3*s+2)}):i<=4?this.setState({holiday:n-(4*s+i),normalDay:4*s+i}):this.setState({holiday:3*s+i-4,normalDay:n-(3*s+i-4)})}else this.setState({holiday:0,normalDay:0})}},{key:"selectRoomNum",value:function(e){this.setState({roomNum:e.target.value.substring(0,1)})}},{key:"selectAdult",value:function(e){if(Number(e.target.value.substring(0,1))+Number(this.state.childNum)>this.state.roomNum*this.state.hotelRoomData.descriptionShort.GuestMax)return this.state.roomNum?alert("\u7e3d\u4eba\u6578\u4e0d\u5f97\u8d85\u904e".concat(this.state.roomNum*this.state.hotelRoomData.descriptionShort.GuestMax)):alert("\u8acb\u5148\u9078\u64c7\u623f\u9593\u6578"),void this.setState({adultNum:0});this.setState({adultNum:e.target.value.substring(0,1)})}},{key:"selectChild",value:function(e){if(Number(e.target.value.substring(0,1))+Number(this.state.adultNum)>this.state.roomNum*this.state.hotelRoomData.descriptionShort.GuestMax)return this.state.roomNum?alert("\u7e3d\u4eba\u6578\u4e0d\u5f97\u8d85\u904e".concat(this.state.roomNum*this.state.hotelRoomData.descriptionShort.GuestMax)):alert("\u8acb\u5148\u9078\u64c7\u623f\u9593\u6578"),void this.setState({childNum:0});this.setState({childNum:e.target.value.substring(0,1)})}},{key:"render",value:function(){var e=[];this.state.hotelBookingData&&Object.keys(this.state.hotelBookingData).length>0&&(e=this.state.hotelBookingData.map(function(e){return new Date(e.date)}));var t=[{before:new Date((new Date).getTime()+864e5)},e];t=t.flat();var a=[{before:this.state.endDayFirstDate?new Date(this.state.endDayFirstDate):new Date((new Date).getTime()+864e5)},e];a=a.flat();var l={pathname:"/reservationDetail",state:{id:this.state.hotelRoomData?this.state.hotelRoomData.id:"",roomName:this.state.hotelRoomData?this.state.hotelRoomData.name:"",roomImg:this.state.hotelRoomData?this.state.hotelRoomData.imageUrl[1]:"",description:this.state.hotelRoomData?this.state.hotelRoomData.description:"",startDay:this.state.selectedStartDay,endDay:this.state.selectedEndDay,totalPeople:Number(this.state.adultNum)+Number(this.state.childNum),totalPrice:this.state.hotelRoomData?this.state.roomNum*(this.state.holiday*this.state.hotelRoomData.holidayPrice+this.state.normalDay*this.state.hotelRoomData.normalDayPrice):"",bookingData:this.state.hotelBookingData?this.state.hotelBookingData:""}},s=!(this.state.adultNum>0&&this.state.childNum>=0&&this.state.selectedStartDay&&this.state.selectedEndDay&&this.state.roomNum>0);return n.a.createElement("div",{className:"innerPage"},n.a.createElement("div",{className:"topArea"},n.a.createElement(F,null),n.a.createElement("div",{className:"content"},n.a.createElement(v.a,{className:"firstRow"},n.a.createElement(E.a,null,n.a.createElement(v.a,null,n.a.createElement(E.a,null,n.a.createElement("span",{className:"hotTag"},"HOT"),"\u623f\u578b\u540d\u7a31:",this.state.hotelRoomData?this.state.hotelRoomData.name:""))),n.a.createElement(E.a,null,n.a.createElement(r.b,{className:"linkButton",to:l},n.a.createElement(M.a,{disabled:s},"\u9810\u8a02")))),n.a.createElement(v.a,{className:"roomsRow"},n.a.createElement(E.a,{xs:"7"},n.a.createElement("img",{src:this.state.hotelRoomData?this.state.hotelRoomData.imageUrl[0]:"",alt:"Card cap"})),n.a.createElement(E.a,{xs:"5"},n.a.createElement(v.a,null,n.a.createElement("img",{src:this.state.hotelRoomData?this.state.hotelRoomData.imageUrl[1]:"",alt:"Card cap"})),n.a.createElement(v.a,null,n.a.createElement("img",{src:this.state.hotelRoomData?this.state.hotelRoomData.imageUrl[2]:"",alt:"Card cap"})))),n.a.createElement(v.a,null,n.a.createElement(E.a,{xs:"7"},n.a.createElement(v.a,{className:"datepickerRow"},n.a.createElement(E.a,null,n.a.createElement(v.a,null,n.a.createElement(E.a,{xs:"4"},n.a.createElement("span",null,"\u5165\u4f4f\u6642\u9593")),n.a.createElement(E.a,{xs:"8"},n.a.createElement(G.a,{type:"text",readOnly:!0,value:this.state.selectedStartDay?this.state.selectedStartDay.toLocaleDateString():"Please select a day"})))),n.a.createElement(E.a,null,n.a.createElement(v.a,null,n.a.createElement(E.a,{xs:"4"},n.a.createElement("span",null,"\u9000\u623f\u6642\u9593")),n.a.createElement(E.a,{xs:"8"},n.a.createElement(G.a,{type:"text",readOnly:!0,value:this.state.selectedEndDay?this.state.selectedEndDay.toLocaleDateString():"Please select a day"})))))),n.a.createElement(E.a,{xs:"5"},n.a.createElement(v.a,{className:"selectRow"},n.a.createElement(E.a,null,n.a.createElement(v.a,null,n.a.createElement(E.a,{xs:"5"},n.a.createElement("span",null,"\u5ba2\u623f")),n.a.createElement(E.a,{xs:"7"},n.a.createElement(G.a,{type:"select",name:"select",onChange:this.selectRoomNum,value:this.state.roomNum},n.a.createElement("option",{value:"0"},"0\u9593"),n.a.createElement("option",{value:"1"},"1\u9593"),n.a.createElement("option",{value:"2"},"2\u9593"))))),n.a.createElement(E.a,null,n.a.createElement(v.a,null,n.a.createElement(E.a,{xs:"5"},n.a.createElement("span",null,"\u6210\u4eba")),n.a.createElement(E.a,{xs:"7"},n.a.createElement(G.a,{type:"select",name:"select",value:this.state.adultNum,onChange:this.selectAdult},n.a.createElement("option",{value:"0"},"0\u4eba"),n.a.createElement("option",{value:"1"},"1\u4eba"),n.a.createElement("option",{value:"2"},"2\u4eba"),n.a.createElement("option",{value:"3"},"3\u4eba"),n.a.createElement("option",{value:"4"},"4\u4eba"),n.a.createElement("option",{value:"5"},"5\u4eba"))))),n.a.createElement(E.a,null,n.a.createElement(v.a,null,n.a.createElement(E.a,{xs:"5"},n.a.createElement("span",null,"\u5c0f\u5b69")),n.a.createElement(E.a,{xs:"7"},n.a.createElement(G.a,{disabled:this.state.hotelRoomData&&!this.state.hotelRoomData.amenities["Child-Friendly"],type:"select",name:"select",value:this.state.childNum,onChange:this.selectChild},n.a.createElement("option",{value:"0"},"0\u4eba"),n.a.createElement("option",{value:"1"},"1\u4eba"),n.a.createElement("option",{value:"2"},"2\u4eba"),n.a.createElement("option",{value:"3"},"3\u4eba"),n.a.createElement("option",{value:"4"},"4\u4eba"),n.a.createElement("option",{value:"5"},"5\u4eba")))))))),n.a.createElement(v.a,null,n.a.createElement(E.a,{xs:"8"},n.a.createElement(v.a,null,n.a.createElement(E.a,null,n.a.createElement(L.a,{selectedDays:this.state.selectedStartDay,onDayClick:this.handleStartDayClick,disabledDays:t})),n.a.createElement(E.a,null,n.a.createElement(L.a,{selectedDays:this.state.selectedEndDay,onDayClick:this.handleEndDayClick,disabledDays:a})))),n.a.createElement(E.a,{xs:"4"},n.a.createElement(v.a,{className:"priceRow"},"\u7e3d\u50f9  NT ",this.state.hotelRoomData?this.state.roomNum*(this.state.holiday*this.state.hotelRoomData.holidayPrice+this.state.normalDay*this.state.hotelRoomData.normalDayPrice):"",n.a.createElement("span",null)," "),n.a.createElement(v.a,{className:"detailRow"},n.a.createElement(E.a,{xs:"5"},n.a.createElement("div",null,"- wifi: ",this.state.hotelRoomData?this.state.hotelRoomData.amenities["Wi-Fi"]?"\u6709":"\u7121":""),n.a.createElement("div",null,"- \u65e9\u9910: ",this.state.hotelRoomData?this.state.hotelRoomData.amenities.Breakfast?"\u6709":"\u7121":""),n.a.createElement("div",null,"- \u96fb\u8996: ",this.state.hotelRoomData?this.state.hotelRoomData.amenities.Television?"\u6709":"\u7121":""),n.a.createElement("div",null,"- \u7a7a\u8abf: ",this.state.hotelRoomData?this.state.hotelRoomData.amenities["Air-Conditioner"]?"\u6709":"\u7121":""),n.a.createElement("div",null,"- \u51b0\u7bb1: ",this.state.hotelRoomData?this.state.hotelRoomData.amenities.Refrigerator?"\u6709":"\u7121":""),n.a.createElement("div",null,"- \u6c99\u767c: ",this.state.hotelRoomData?this.state.hotelRoomData.amenities.Sofa?"\u6709":"\u7121":"")),n.a.createElement(E.a,{xs:"7"},n.a.createElement("div",null,"- \u6f02\u4eae\u7684\u8996\u91ce: ",this.state.hotelRoomData?this.state.hotelRoomData.amenities["Great-View"]?"\u6709":"\u7121":""),n.a.createElement("div",null,"- \u7981\u6b62\u5438\u83f8: ",this.state.hotelRoomData?this.state.hotelRoomData.amenities["Smoke-Free"]?"\u6709":"\u7121":""),n.a.createElement("div",null,"- \u9069\u5408\u5152\u7ae5: ",this.state.hotelRoomData?this.state.hotelRoomData.amenities["Child-Friendly"]?"\u6709":"\u7121":""),n.a.createElement("div",null,"- \u5bf5\u7269\u651c\u5e36: ",this.state.hotelRoomData?this.state.hotelRoomData.amenities["Pet-Friendly"]?"\u6709":"\u7121":""),n.a.createElement("div",null,"- Mini Bar: ",this.state.hotelRoomData?this.state.hotelRoomData.amenities["Mini-Bar"]?"\u6709":"\u7121":""),n.a.createElement("div",null,"- Room Service: ",this.state.hotelRoomData?this.state.hotelRoomData.amenities["Room-Service"]?"\u6709":"\u7121":""))))),n.a.createElement(v.a,{className:"describeRow"},n.a.createElement(E.a,{xs:"9"},n.a.createElement(v.a,null,this.state.hotelRoomData?this.state.hotelRoomData.description:""),n.a.createElement(v.a,{className:"checkInProgress"},n.a.createElement(E.a,{xs:"3"},"checkIn\u6642\u9593"),n.a.createElement(E.a,{xs:"9"},n.a.createElement("span",{className:"checkInear"},this.state.hotelRoomData?this.state.hotelRoomData.checkInAndOut.checkInEarly:""),n.a.createElement(X.a,{multi:!0},n.a.createElement(X.a,{bar:!0,value:this.state.checkInEarly/24*100}),n.a.createElement(X.a,{bar:!0,value:(this.state.checkInLate-this.state.checkInEarly)/24*100}),n.a.createElement(X.a,{bar:!0,value:(24-this.state.checkInLate)/24*100})),n.a.createElement("span",{className:"checkInlate"},this.state.hotelRoomData?this.state.hotelRoomData.checkInAndOut.checkInLate:""))),n.a.createElement(v.a,{className:"checkOutProgress"},n.a.createElement(E.a,{xs:"3"},"checkOut\u6642\u9593"),n.a.createElement(E.a,{xs:"9"},n.a.createElement("span",{id:"checkOut"},this.state.hotelRoomData?this.state.hotelRoomData.checkInAndOut.checkOut:""),n.a.createElement(X.a,{multi:!0},n.a.createElement(X.a,{bar:!0,value:this.state.checkOut/24*100}),n.a.createElement(X.a,{bar:!0,value:(24-this.state.checkOut)/24*100}))))),n.a.createElement(E.a,{xs:"3"},n.a.createElement(_.a,null,n.a.createElement($.a,null,n.a.createElement(z.a,null,"\u5e8a\u578b : ",this.state.hotelRoomData?this.state.hotelRoomData.descriptionShort.Bed[0]:""),n.a.createElement(z.a,null,"\u623f\u5ba2\u4eba\u6578\u9650\u5236 : ",this.state.hotelRoomData?this.state.hotelRoomData.descriptionShort.GuestMin:""," ~ ",this.state.hotelRoomData?this.state.hotelRoomData.descriptionShort.GuestMax:""," \u4eba "),n.a.createElement(z.a,null,"\u885b\u6d74\u6578\u91cf : ",this.state.hotelRoomData?this.state.hotelRoomData.descriptionShort["Private-Bath"]:""," \u9593"),n.a.createElement(z.a,null,"\u623f\u9593\u5927\u5c0f : ",this.state.hotelRoomData?this.state.hotelRoomData.descriptionShort.Footage:""," \u5e73\u65b9\u516c\u5c3a"),n.a.createElement(z.a,null,"\u5047\u65e5(\u4e94-\u65e5)\u50f9\u683c : ",this.state.hotelRoomData?this.state.hotelRoomData.holidayPrice:""),n.a.createElement(z.a,null,"\u5e73\u65e5(\u4e00-\u56db)\u50f9\u683c : ",this.state.hotelRoomData?this.state.hotelRoomData.normalDayPrice:""))))))))}}]),t}(l.Component),Z=a(35),q=a.n(Z),J=a(80),K=a(81),H=a(82),U=a(83),Q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).handleStartDayChange=a.handleStartDayChange.bind(Object(A.a)(a)),a.handleEndDayChange=a.handleEndDayChange.bind(Object(A.a)(a)),a.submitReservation=a.submitReservation.bind(Object(A.a)(a)),a.state={roomDetail:a.props.location.state,formSex:"W",formFirstname:"",formLastname:"",formTel:"",formEmail:"",formCheckEmail:"",formExtraService:"",fisrtNameValid:!1,fisrtNameinValid:!1,lastNameValid:!1,lastNameinValid:!1,telValid:!1,telinValid:!1,emailinValid:!1,emailValid:!1,checkEmailinValid:!1,checkEmailValid:!1,selectedStartDay:a.props.location.state.startDay,selectedEndDay:a.props.location.state.endDay,endDayFirstDate:a.props.location.state.startDay.getTime()+864e5},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"handleStartDayChange",value:function(e,t){var a=t.selected;this.setState({selectedStartDay:a?void 0:e,endDayFirstDate:a?void 0:e.getTime()+864e5}),this.state.selectedEndDay&&this.state.selectedEndDay.getTime()<=e.getTime()+864e5&&this.setState({selectedEndDay:void 0})}},{key:"handleEndDayChange",value:function(e,t){var a=t.selected;this.state.selectedStartDay?this.setState({selectedEndDay:a?void 0:e}):alert("\u8acb\u5148\u9078\u64c7\u5165\u4f4f\u65e5\u671f")}},{key:"getFirstName",value:function(e){var t=/^[a-zA-Z,]{1,}$/;this.setState({formFirstname:e.target.value,fisrtNameValid:t.test(e.target.value),fisrtNameinValid:!t.test(e.target.value)})}},{key:"getLastName",value:function(e){var t=/^[a-zA-Z]{1,}$/;this.setState({formLastname:e.target.value,lastNameValid:t.test(e.target.value),lastNameinValid:!t.test(e.target.value)})}},{key:"getSex",value:function(e){this.setState({formSex:e.target.value})}},{key:"getTel",value:function(e){var t=/^[0][9][\d]{8}$/;this.setState({formTel:e.target.value,telValid:t.test(e.target.value),telinValid:!t.test(e.target.value)})}},{key:"getEmail",value:function(e){if(e.target.value){var t=/\w@[\w.]{1,}[^.\/<>_+=]$/;this.setState({formEmail:e.target.value,emailValid:t.test(e.target.value),emailinValid:!t.test(e.target.value)})}else this.setState({formEmail:e.target.value,emailValid:!1,emailinValid:!1})}},{key:"getCheckEmail",value:function(e){if(e.target.value){var t=e.target.value===this.state.formEmail;this.setState({formCheckEmail:e.target.value,checkEmailValid:t,checkEmailinValid:!t})}else this.setState({formCheckEmail:e.target.value,checkEmailValid:!1,checkEmailinValid:!1})}},{key:"getExtraServiceSelect",value:function(e){this.setState({formExtraService:!!e.target.value})}},{key:"submitReservation",value:function(){var e=this;function t(e){var t=e.split("/");return t[1]<10&&(t[1]="0".concat(t[1])),t[2]<10&&(t[2]="0".concat(t[2])),t}for(var a=this.state,l=a.formFirstname,n=a.formLastname,s=a.formTel,i=a.fisrtNameValid,r=a.lastNameValid,o=a.telValid,c=a.selectedStartDay,m=a.selectedEndDay,h=[],u=c.getTime(),d=m.getTime()-u,E=0;E<=d;E+=864e5){var D=new Date(u+E);h.push(t(D.toLocaleDateString()).join("-"))}var v={name:l+n,tel:s,date:h};i&&r&&o?fetch("https://challenge.thef2e.com/api/thef2e2019/stage6/room/".concat(this.state.roomDetail.id),{method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer i2A9LrARnW0vSgOGpO9E3X7kDM1tZDQwRLDK1qOlXxXtzVKG6ByZN2JXLxqC"}),body:JSON.stringify(v)}).then(function(e){return e.json()}).then(function(t){t.success?e.props.history.push("/finishedReservation"):alert(t.message)}).catch(function(e){alert(e)}):this.setState({fisrtNameinValid:!i,lastNameinValid:!r,telinValid:!o})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedStartDay,l=t.selectedEndDay,s=t.roomDetail,i=[];s.bookingData&&Object.keys(s.bookingData).length>0&&(i=s.bookingData.map(function(e){return new Date(e.date)}));var o=[{before:new Date((new Date).getTime()+864e5)},i];o=o.flat();var c=[{before:this.state.endDayFirstDate?new Date(this.state.endDayFirstDate):new Date((new Date).getTime()+864e5)},i];return c=c.flat(),n.a.createElement("div",{className:"reservationDetail"},n.a.createElement("div",{className:"topArea"},n.a.createElement(F,null),n.a.createElement("div",{className:"content"},n.a.createElement("h3",{className:"content_title"},"\uff0e\u8a02\u55ae\u5167\u5bb9"),n.a.createElement(v.a,{className:"firstRow"},n.a.createElement(E.a,{xs:"5"},n.a.createElement("img",{src:this.state.roomDetail.roomImg,alt:"roomImg"})),n.a.createElement(E.a,{xs:"7"},n.a.createElement(v.a,{className:"firstRow_title"},n.a.createElement(E.a,{xs:"9"},n.a.createElement("span",{className:"hotTag"},"HOT"),n.a.createElement("span",null,"\u623f\u578b\u540d\u7a31 : ",this.state.roomDetail.roomName)),n.a.createElement(E.a,{xs:"3"},n.a.createElement(r.b,{className:"linkButton",to:"/innerPage/".concat(this.state.roomDetail.id)},n.a.createElement("button",null,"\u53d6\u6d88")))),n.a.createElement(v.a,{className:"firstRow_detail"},n.a.createElement(E.a,null,n.a.createElement(v.a,null,n.a.createElement("span",null,"\u5165\u4f4f\u65e5\u671f : ",this.state.roomDetail.startDay.getFullYear()," \u5e74 ",this.state.roomDetail.startDay.getMonth()+1," \u6708 ",this.state.roomDetail.startDay.getDate()," \u65e5 ~",this.state.roomDetail.endDay.getFullYear()," \u5e74 ",this.state.roomDetail.endDay.getMonth()+1," \u6708 ",this.state.roomDetail.endDay.getDate()," \u65e5 ")),n.a.createElement(v.a,null,n.a.createElement("span",null,"\u5165\u4f4f\u4eba\u6578 : ",this.state.roomDetail.totalPeople)),n.a.createElement(v.a,{className:"firstRow_detail_price"},n.a.createElement("span",{className:"noBreakfast"},"\u4e0d\u542b\u65e9\u9910"),n.a.createElement(v.a,{className:"priceRow"},"\u7e3d\u50f9 NT",this.state.roomDetail.totalPrice,n.a.createElement("span",null))),n.a.createElement(v.a,null,this.state.roomDetail.description))))),n.a.createElement(J.a,null,n.a.createElement("span",{className:"reservationTag"},"\u8a02\u623f\u8cc7\u6599"),n.a.createElement(v.a,{form:!0,className:"datePickerRow"},n.a.createElement(E.a,{md:4},n.a.createElement(K.a,{for:"exampleEmail"},"\u5165\u4f4f\u65e5\u671f"),n.a.createElement(H.a,null,n.a.createElement(q.a,{value:a,onDayChange:this.handleStartDayChange,dayPickerProps:{disabledDays:o}}))),n.a.createElement(E.a,{md:4},n.a.createElement(K.a,{for:"exampleEmail"},"\u9000\u623f\u65e5\u671f"),n.a.createElement(H.a,null,n.a.createElement(q.a,{value:l,onDayChange:this.handleEndDayChange,dayPickerProps:{selectedDays:l,disabledDays:c}}))),n.a.createElement(E.a,{md:4},"\u6b61\u8fce\u60a8\u7684\u849e\u81e8\uff0c\u8aa0\u646f\u70ba\u60a8\u670d\u52d9",l&&a?(l.getTime()-a.getTime())/864e5:0,"\u665a")),n.a.createElement(v.a,{form:!0},n.a.createElement(E.a,{md:3},n.a.createElement(H.a,null,n.a.createElement(K.a,{for:"exampleEmail"},"\u59d3\u6c0f(\u82f1\u6587)"),n.a.createElement(G.a,{valid:this.state.lastNameValid,invalid:this.state.lastNameinValid,value:this.state.formLastname,onChange:function(t){return e.getLastName(t)}}),n.a.createElement(U.a,{invalid:this.state.lastNameinValid.toString()},"\u5fc5\u586b\uff0c\u683c\u5f0f\u70ba\u82f1\u6587"))),n.a.createElement(E.a,{md:6},n.a.createElement(H.a,null,n.a.createElement(K.a,{for:"examplePassword"},"\u59d3\u540d(\u82f1\u6587)"),n.a.createElement(G.a,{valid:this.state.fisrtNameValid,invalid:this.state.fisrtNameinValid,value:this.state.formFirstname,onChange:function(t){return e.getFirstName(t)}}),n.a.createElement(U.a,{invalid:this.state.fisrtNameinValid.toString()},"\u5fc5\u586b\uff0c\u683c\u5f0f\u70ba\u82f1\u6587"))),n.a.createElement(E.a,{md:3},n.a.createElement(H.a,null,n.a.createElement(K.a,{for:"exampleEmail"},"\u7a31\u8b02"),n.a.createElement(G.a,{type:"select",name:"select",id:"exampleSelect",value:this.state.formSex,onChange:function(t){return e.getSex(t)}},n.a.createElement("option",{value:"W"},"\u5973\u58eb"),n.a.createElement("option",{value:"M"},"\u7537\u58eb"))))),n.a.createElement(H.a,null,n.a.createElement(K.a,{for:"exampleEmail"},"\u9023\u7d61\u96fb\u8a71"),n.a.createElement(G.a,{valid:this.state.telValid,invalid:this.state.telinValid,value:this.state.formTel,onChange:function(t){return e.getTel(t)}}),n.a.createElement(U.a,{invalid:this.state.telinValid.toString()},"\u5fc5\u586b\uff0c\u624b\u6a5f\u683c\u5f0f\u932f\u8aa4(ex:0912345678)")),n.a.createElement(H.a,null,n.a.createElement(K.a,{for:"examplePassword"},"\u96fb\u5b50\u4fe1\u7bb1"),n.a.createElement(G.a,{valid:this.state.emailValid,invalid:this.state.emailinValid,value:this.state.formEmail,onChange:function(t){return e.getEmail(t)}}),n.a.createElement(U.a,{invalid:this.state.emailinValid.toString()},"\u4fe1\u7bb1\u683c\u5f0f\u932f\u8aa4\uff0c\u5305\u542b\uff20\u4e0d\u5f97\u5df2\u7279\u6b8a\u5b57\u5143\u70ba\u6700\u5f8c\u4e00\u5b57\u5143")),n.a.createElement(H.a,null,n.a.createElement(K.a,{for:"examplePassword"},"\u78ba\u8a8d\u4fe1\u7bb1"),n.a.createElement(G.a,{valid:this.state.checkEmailValid,invalid:this.state.checkEmailinValid,value:this.state.formCheckEmail,onChange:function(t){return e.getCheckEmail(t)}}),n.a.createElement(U.a,{invalid:this.state.checkEmailinValid.toString()},"\u8207\u4e0a\u5217\u4e0d\u76f8\u7b26")),n.a.createElement(v.a,{className:"extraService"},"\u984d\u5916\u52a0\u50f9\u670d\u52d9"),n.a.createElement(H.a,{className:"radioGroup",tag:"fieldset"},n.a.createElement(H.a,{check:!0,value:this.state.formExtraService,onChange:function(t){return e.getExtraServiceSelect(t)}},n.a.createElement(K.a,{check:!0},n.a.createElement(G.a,{type:"radio",name:"radio1",value:"breakfast"})," ","\u65e9\u9910\xa0\xa0\xa0$320/1\u4eba"),n.a.createElement(K.a,{check:!0},n.a.createElement(G.a,{type:"radio",name:"radio1",value:"driveTour"})," ","\u79df\u8eca\u65c5\u904a\xa0\xa0\xa0$2200/1\u65e5"))),n.a.createElement(v.a,{className:"linkButton"},n.a.createElement(M.a,{disabled:!1,onClick:this.submitReservation},"\u78ba\u8a8d\u8a02\u623f"))))))}}]),t}(l.Component),Y=Object(o.e)(Q),ee=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"innerPage"},n.a.createElement("div",{className:"topArea"},n.a.createElement(F,null),n.a.createElement("div",{className:"content"},"Finished")))}}]),t}(l.Component);var te=function(){return n.a.createElement(r.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(o.a,{exact:!0,path:"/",component:P}),n.a.createElement(o.a,{path:"/innerPage/:id",component:W}),n.a.createElement(o.a,{path:"/reservationDetail",component:Y}),n.a.createElement(o.a,{path:"/finishedReservation",component:ee})),n.a.createElement(T,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(64);i.a.render(n.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[48,1,2]]]);
//# sourceMappingURL=main.08700251.chunk.js.map